I"Q!<h4 id="准备">准备</h4>
<p>1.制作<code class="language-plaintext highlighter-rouge">framework</code>移步<a href="https://yuan920.github.io/2020/02/15/iOS%E9%9D%99%E6%80%81%E5%BA%93%E5%92%8C%E5%8A%A8%E6%80%81%E5%BA%93%E7%9A%84%E5%88%9B%E5%BB%BA%E5%92%8C%E4%BD%BF%E7%94%A8/">这里</a>;<br />
2.首次上传需要创建<code class="language-plaintext highlighter-rouge">Trunk</code>账号;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 创建
pod trunk register 邮箱 '用户名' --verbose 

# 检测
pod trunk me
</code></pre></div></div>

<h4 id="上传">上传</h4>

<p>1.创建一个<code class="language-plaintext highlighter-rouge">PodLib</code>模板</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pod lib create RKKeepAlive
</code></pre></div></div>
<p>2.根据提示完成项目配置</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Cloning `https://github.com/CocoaPods/pod-template.git` into `RKKeepAlive`.
Configuring RKKeepAlive template.
security: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.

------------------------------

To get you started we need to ask a few questions, this should only take a minute.

If this is your first time we recommend running through with the guide: 
 - https://guides.cocoapods.org/making/using-pod-lib-create.html
 ( hold cmd and double click links to open in a browser. )


What platform do you want to use?? [ iOS / macOS ]
 &gt; ios

What language do you want to use?? [ Swift / ObjC ]
 &gt; objc

Would you like to include a demo application with your library? [ Yes / No ]
 &gt; yes

Which testing frameworks will you use? [ Specta / Kiwi / None ]
 &gt; none

Would you like to do view based testing? [ Yes / No ]
 &gt; no

What is your class prefix?
 &gt; RK
security: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.
security: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.
security: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.
security: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.
security: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.
security: SecKeychainSearchCopyNext: The specified item could not be found in the keychain.

Running pod install on your new library.

Analyzing dependencies
Downloading dependencies
Installing RKKeepAlive (0.1.0)
Generating Pods project
Integrating client project

[!] Please close any current Xcode sessions and use `RKKeepAlive.xcworkspace` for this project from now on.
Pod installation complete! There is 1 dependency from the Podfile and 1 total pod installed.

[!] Your project does not explicitly specify the CocoaPods master specs repo. Since CDN is now used as the default, you may safely remove it from your repos directory via `pod repo remove master`. To suppress this warning please add `warn_for_unused_master_specs_repo =&gt; false` to your Podfile.

 Ace! you're ready to go!
 We will start you off by opening your project in Xcode
  open 'RKKeepAlive/Example/RKKeepAlive.xcworkspace'

To learn more about the template see `https://github.com/CocoaPods/pod-template.git`.
To learn more about creating a new pod, see `https://guides.cocoapods.org/making/making-a-cocoapod`.
</code></pre></div></div>
<p>3.在<code class="language-plaintext highlighter-rouge">GitHub</code>创建一个仓库,并将刚创建的项目<code class="language-plaintext highlighter-rouge">RKKeepAlive</code>关联远程仓库;<br />
4.在<code class="language-plaintext highlighter-rouge">RKKeepAlive/RKKeepAlive</code>目录下创建<code class="language-plaintext highlighter-rouge">frameworks</code>文件夹<code class="language-plaintext highlighter-rouge">【和Assets、Classes同级】</code>并将准备工作中制作完成的<code class="language-plaintext highlighter-rouge">framework</code>放到此目录下; 
5.编辑<code class="language-plaintext highlighter-rouge">.podspec</code>,配置<code class="language-plaintext highlighter-rouge">framework</code>路径</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>s.vendored_frameworks = 'RKKeepAlive/Frameworks/RKKeepAlive.framework'
</code></pre></div></div>
<p>6.校验</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 本地校验
pod lib lint 

# 远程校验
pod spec lint 
</code></pre></div></div>
<p>7.可能出现的问题</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Q:1&gt;
[!]  RKKeepAlive did not pass validation, due to 1 warning (but you can use `--allow-warnings` to ignore it).
You can use the `--no-clean` option to inspect any issue.
A:添加  --allow-warnings  --no-clean 即可
pod lib lint --allow-warnings  --no-clean
pod spec lint --allow-warnings  --no-clean


Q:2&gt;
- ERROR | [iOS] xcodebuild: Returned an unsuccessful exit code.
A:在.podspec添加 
s.pod_target_xcconfig = { 'EXCLUDED_ARCHS[sdk=iphonesimulator*]' =&gt; 'arm64' }
s.user_target_xcconfig = { 'EXCLUDED_ARCHS[sdk=iphonesimulator*]' =&gt; 'arm64' }
</code></pre></div></div>
<p>8.通过验证后将代码提交<code class="language-plaintext highlighter-rouge">git</code>远程仓库，并添加<code class="language-plaintext highlighter-rouge">tag</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 版本号要和.podspec中版本一致
git tag 0.1.0
#推送远端
git push --tags
</code></pre></div></div>
<p>9.上传</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pod trunk push --allow-warnings
</code></pre></div></div>
<p>出现如下提示说明成功</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Validating podspec
 -&gt; RKKeepAlive (0.1.0)
    - NOTE  | xcodebuild:  note: Using new build system
    - NOTE  | xcodebuild:  note: Using codesigning identity override: -
    - NOTE  | xcodebuild:  note: Build preparation complete
    - NOTE  | [iOS] xcodebuild:  note: Planning
    - NOTE  | [iOS] xcodebuild:  note: Building targets in dependency order

Updating spec repo `trunk`

CocoaPods 1.11.3 is available.
To update use: `sudo gem install cocoapods`

For more information, see https://blog.cocoapods.org and the CHANGELOG for this version at https://github.com/CocoaPods/CocoaPods/releases/tag/1.11.3


--------------------------------------------------------------------------------
 🎉  Congrats

 🚀  RKKeepAlive (0.1.0) successfully published
 📅  July 22nd, 03:31
 🌎  https://cocoapods.org/pods/RKKeepAlive
 👍  Tell your friends!
--------------------------------------------------------------------------------
</code></pre></div></div>

<h4 id="使用">使用</h4>

<p>1.上传成功后<code class="language-plaintext highlighter-rouge">search</code>找不到自己上传的<code class="language-plaintext highlighter-rouge">framework</code>需要执行</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pod repo update --verbose
</code></pre></div></div>
<p>2.删除</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pod trunk delete RKKeepAlive 0.1.0
</code></pre></div></div>
<h4 id="其他错误">其他错误</h4>
<p><code class="language-plaintext highlighter-rouge">'Pods-App' target has transitive dependencies that include static binaries</code><br />
这个错误的意思是，你在做私有组件时使用了第三的静态库。加上<code class="language-plaintext highlighter-rouge">--use-libraries</code>即可解决</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pod lib lint --use-libraries
</code></pre></div></div>

<h4 id="参考资料">参考资料</h4>

<p><a href="https://devfutao.com/archives/175/">西门桃桃</a><br />
<a href="https://xie.infoq.cn/article/dbfbe3aa0ffdc81a648e7da75">InfoQ</a><br />
<a href="https://www.jianshu.com/p/88180b4d2ab7/">這Er-不支持模拟器只能真机</a><br />
<a href="https://www.jianshu.com/p/208aff2dccdc">shenshizhong-git tag 删除</a></p>

:ET