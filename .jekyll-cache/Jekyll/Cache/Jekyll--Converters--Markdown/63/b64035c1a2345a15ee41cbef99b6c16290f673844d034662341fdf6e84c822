I"g<h4 id="需求场景">需求场景</h4>

<p>用户首次打开<code class="language-plaintext highlighter-rouge">app</code>弹出协议窗口,同意就继续使用,拒绝就退出<code class="language-plaintext highlighter-rouge">app</code></p>

<h4 id="处理方案">处理方案</h4>

<ol>
  <li>简单粗暴<code class="language-plaintext highlighter-rouge">但是会上报bugly</code>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[MBProgressHUD showMessage:YZMsg(@"正在退出")];
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
 [MBProgressHUD hideHUD];
 abort();
});
</code></pre></div>    </div>
  </li>
  <li>模拟切后台动画,然后杀掉
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Home键退出后台动画效果，此时后台还是挂起状态
[[UIApplication sharedApplication] performSelector:@selector(suspend)];
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wundeclared-selector"
  [[UIApplication sharedApplication] performSelector:@selector(terminateWithSuccess)];
#pragma clang diagnostic pop
});
</code></pre></div>    </div>
  </li>
</ol>
:ET